2007-06-19  Atsushi Enomoto  <atsushi@ximian.com>

	* Makefile.am : we need uninstall-plugin to avoid
	  possible browser shutdown on browsing sl-enabled sites.

2007-06-19  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp,  plugin-class.h: Implement DependencyObject properties
	getter and setters.

2007-06-19  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Eliminate remaining canvas field.

2007-06-19  Miguel de Icaza  <miguel@novell.com>

	* plugin.h: Eliminate the field canvas, as the managed code can
	replace the toplevel and we wont be able to track it.   Access the
	field directly from the surface instead.

2007-06-18  Miguel de Icaza  <miguel@novell.com>

	* moonlight.cs: Create appdomains to keep applications separate
	and to keep the IntPtr to the plugin.

	The handle to the plugin is stored in agclr in the BrowserHost
	class. 

2007-06-18  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: Implement maxFrameRate property.

2007-06-18  Everaldo Canuto  <ecanuto@novell.com>

	* moonlight.h: Just a high value for MAX_STREAM_SIZE.

2007-06-18  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Implement Write and WriteReady to interact with
	Downloader functions. It looks to be right but image still dont appears, 
	mayeb something in download manager functions. STREAM_NOTIFY macro added to
	header file.

2007-06-18  Everaldo Canuto  <ecanuto@novell.com>

	* downloader.cpp: Fix stream notify data, must be Downloader not 
	PluginDownloader.

2007-06-18  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Remove stream destruction from Write and WriteReady, it
	was preventing browser to call our write function.

	* moonlight.h: MAX_STREAM_SIZE constant added.

2007-06-17  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Add a new StreamNotifyFlags REQUEST, it is used by
	files requested by Mono runtime, the use of notify bring us a more clean
	code to controls requested files.

	* downloader.cpp: Use StreamNotify and check for existense of instance.

007-06-17  Jackson Harper  <jackson@ximian.com>

	* moonlight.cs: Parse type names out of xmns strings. x:Class uses
	this slightly different format.

2007-06-17  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Add support for "#" (references) in source urls, it
	make possible use embedded xaml files. Also every source updates go to the
	UpdateSource and UpdateSourceByReference methods.

	* moonlight.cs: Xaml file loader splited in two methods CreateXamlFileLoader
	and CreateXamlStrLoader to support embedded files.

	* mono.cpp: Wrapper funtions also splited in file loader and str loader.

2007-06-17  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Use setSource to define source in Initialize, it give us only
	one place to check set source code. Also prevent setSource to segfault when
	source field is null.

2007-06-17  Everaldo Canuto  <ecanuto@novell.com>

	Fixes browser segfaults related to timemanager when goto another page or 
	close browser.

	* plugin-glue.cpp: Call runtime_init every time that browser initialize 
	plugin, when plugin shutdown just shutdown timemanager since we have 
	problems to runtime_shutdown. Some comment added to this implementation
	and we must back here when runtime_shutdown is fixed.

2007-06-17  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Create StreamNotify class to use as notifydata 
	parameter in NPN_GetURLNotify function, it gives us better control about
	what is downloading. Fixes errors when you try change control source 
	property.

2007-06-17  Miguel de Icaza  <miguel@novell.com>

	* downloader.cpp (p_downloader_send): Some tidbits for the plugin
	download, not complete.

>>>>>>> .r79944
2007-06-16  Jackson Harper  <jackson@ximian.com>

	* moonlight.cs: Set custom attributes on xaml elements.

2007-06-16  Everaldo Canuto  <ecanuto@novell.com>

	* moonlight.h: Include config.h since moonlight.h is included by all files.
	Fixes compilation problems.

2007-06-16  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Remove sourceUrl and use NPN_GetURLNotify notifyData
	param to inform when download is source.

2007-06-16  Everaldo Canuto  <ecanuto@novell.com>

	* mono.cpp: Remove debug message cr.

	* plugin.cpp, plugin.h, plugin-class.cpp: Windowless property added.

2007-06-16  Jackson Harper  <jackson@ximian.com>

	* moonlight.cs: Quick implementation of miguels beautiful new xaml
	loading mechanism. We now properly download the assembly and
	create the element. The custom.xaml test does work, however you
	need to invalidate the canvas to see the red canvas background
	showup.

2007-06-16  Miguel de Icaza  <miguel@novell.com>

	New mechanism for loading XAML files.

	Since XAML files can contain references to external assemblies and
	these have to be downloaded using the browser, we have now changed
	our previous setup that just called the xaml parser with a setup
	that is able to download dependencies.

	The system works by attempting repeatedly to parse the XAML file.
	The XAML parser needs to return an error condition that includes
	the missing dependency.   

	For all missing dependencies, we request the file from the
	browser, and we re-try the parsing until it works (or it fails due
	to other problems). 
	
	* moonlight.cs: Instead of exposing a CreateFromXaml method, we
	now expose a Loader object.

	The Loader object can keep track of downloaded assembly
	dependencies and calls the parser.
	
	* plugin.cpp (NewStream): Use a primitive state machine
	(vm_missing_url == vm_missing_file) to detect when we have just
	requested that a file be downloaded.   This probably is too
	primitive. 

	(TryLoad): New method.    
	
	Tries to load the XAML file, the parsing might fail because a
	required dependency is not available, so we need to queue the
	request to fetch the data.

	(LoadFromXaml): Use vm_xaml_loader_new and TryLoad now.
	
	* mono.cpp (vm_init): We now use a handful of more methods from
	moonlight.cs 

	(vm_loader_try, vm_insert_mapping): helper functions to call into
	the managed wrapper for XAML file loading.

2007-06-16  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, 
	* plugin.h, 
	* plugin-class.cpp: Implement enableFramerateCounter, enableRedrawRegions
	and enableHtmlAccess properties.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h, plugin-class.cpp: Background property added.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Let LoadFromXaml just call load xaml routines.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* moonlight.cs: Fix surface attachment.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Prevent multiple runtime and mono vm initialization.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: LoadFromXaml added to host canvas creation.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* moonlight.h: Turns mono runtime enabled by default.

	* mono.cpp: Use of DEBUGMSG macro for debug message.

	* moonlight.cs: Fix Canvas kind number.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h, plugin-class.cpp: Fix setter for source property.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Add sourceUrl to get information about base source
	url. New Stream also check if request is for source file, if not return
	NP_NORMAL to be used later by downloader functions.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: Remove macro STRING_TO_NPVARIANT, create
	method StringToNPVariant and change all reverences from macro to method. 
	StringToNPVariant also take care about NULL strings.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h, plugin-class.cpp: Implement initParams property.

2007-06-15  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: Implement setters for enableFramerateCounter,
	enableHtmlAccess and windowless. This fields cant be set after 
	initialization so just do nothing and return true.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: After PluginObject changes we can back to release objects
	and it fix segfault when browser closes.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp,
	* plugin-class.cpp,
	* plugin-class.h: Remove unneeded instance fields, and contructor, after
	implementation of PluginObject we have a better way to get instance 
	information.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: Change all PluginRootClass properties to use new object
	class PluginObject.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp,
	* plugin-class.h: Rename NPObject references to PluginObject, PluginObject 
	class theres more useful information like instance and plugin.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* downloader.cpp,
	* downloader.h,
	* Makefile.am: Downloader functions added.

	* plugin-glue.cpp: On NPP_Initialize call downloader_initialize.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: In PluginDependencyObject:: ClassGetProperty return 
	false instead of null because funtion is of type boolean. It fix message
	warning.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Move rootclass declaration to plugin-class.
	
	* plugin.h: Remove inclusion of plugin-class.h.

	* plugin-class.h: Introduces PluginObject class inherited from NPObject and 
	add rootclass declaration.

	* plugin-class.cpp: Uses PluginObject instead of NPObject, also make use of
	object in 'source' property getter.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Add a new member finalize that must be calling 
	instead of delete, we must later found a way to fix reload problems.

	* plugin-glue.cpp: Call finalize instead of delete.

	* TODO: Some notes about this bad implementation.

2007-06-14  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: Add setter for control.source property.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: isLoaded property added.

	* plugin-class.cpp: Implement control.isLoaded wrapper.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.h: 
	- Take some notes on properties that cant be set after initialization.
	- Create macho STRING_TO_NPVARIANT to standardize the way how strings are
	returned to jscript calls.

	* plugin-class.cpp:
	- Implement control.source using STRING_TO_NPVARIANT macro.
	- Uses STRING_TO_NPVARIANT macho in control.settings.version.

	* plugin.h: Add source property.

	* plugin.cpp: Set source on initialization.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: 
	- Move static rootobject to class field to get working pages with more than
	one moonlight control.
	- Implement param source for html object elements, this is default way to
	tell plugin which xaml it must load.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h:
	- Move instance field from PluginRootClass to PluginClass because most
	classes can make use of this field, class constructor is also changed to
	receive instance as parameter.
	- Remove host field from PluginDependencyObject, host can be accessed using
	instance field.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp: Implement "control.content" proeprties.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* TODO: Added to include information about features that we know that is
	not current supported. Can be use for now to take some notes to be read 
	after 21th june.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.h: Add comments about read write/read only on properties.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: Add SetProperty to PLUGIN_PROPERTIES
	and implement it for all classes.

2007-06-13  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: 
	- Fix IndexOf method.
	- Create and uses macros PLUGIN_PROPERTIES and PLUGIN_METHODS to define 
	properties and methods.
	- Uses arrays to define properties and methods.
	- Use NPID macro to get string identifier.

2007-06-12  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp:  Fix dependency of PLUGINROOTCLASS_PCOUNT in property
	array initialization.

2007-06-12  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: 
	- Implement IndexOf method that uses and array.
	- implement properties array.
	- ClassHasProperty now uses IndexOf.

2007-06-12  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Fix LIBADD to include MOON_LIBS instead of two times 
	PLUGIN_LIBS.

2007-06-12  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: Get content and settings as a plugin
	class properties.

2007-06-12  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: PluginContent class added.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp, plugin.h: Remove unused CreateDemoControls method.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Remove unused code and fix function names.

	* moonlight.h: Remove ";" on end of PLUGIN_DESCRIPTION define.

2007-06-11  Atsushi Enomoto  <atsushi@ximian.com>

	* Makefile.am : build fix. without -f rm fails.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-class.cpp, plugin-class.h: Remove unused method ClassAllocate
	and fix all debug messages.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* plugin.cpp: Fix object creation using NPN_RetainObject to increment
	reference count as described in Mozilla documentation.

	* plugin-class.cpp: On ClassDeallocate uses NPN_ReleaseObject that
	checks for references and release object when reference count is equal
	zero. It see to be solve all remaining segfault when browser closes.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	[Refactory jscript runtime code]

	* plugin-class.cpp, plugin-class.h: Create new class PluginRootClass,
	to be a proxy for javascript runtime calls, old code on plugin instance
	was moved here and all segfault related to script stuff was gone.

	* plugin.cpp, plugin.h: Remove jscript runtime related code and use
	PluginRootClass.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* moon-mono.cpp,
	* mono.cpp,
	* plugin.h: Fix remaining config.h -> moonlight.h.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* moonlight.h: Define RUNTIME to enable/disable mono runtime 
	integration. Its because right now it fails when open a page with 
	script so we can comment /#define RUNTIME to get plugin working in
	old way.

	* plugin.cpp: Dont call vm_load_xaml when RUNTIME is not defined.

	* plugin-glue.cpp: Dont call vm_init when RUNTIME is not defined.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Renamed to plugin.cpp.
	* moon-plugin.h: Renaned to plugin.h.
	* config.h: Renaned to moonlight.h.

	* plugin-class.h, plugin-glue.cpp: Update includes.

2007-06-11  Miguel de Icaza  <miguel@novell.com>

	* Makefile.am: Delete the ~/.mozilla/plugins/libmoon.so in case it
	was around, that was the painful bug.

	* moon-plugin.cpp (CreateWindow): Do not create a canvas, nor
	attach it, let Mono do that. 
	(StreamAsFile): Request that the VM loads the file, this will
	change to something else later when we use the Silverlight object
	embedding API.

	* moonlight.cs: Implement some bits, it currently only loads the
	XAML file, it needs to create a new appdomain.

2007-06-11  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am,
	* moon-mono.cpp,
	* mono.cpp: Rename moon.cpp to moon-mono.cpp.

	* moon-mono.h: Add header information.

	* plugin-glue.cpp,
	* config.h: Add constant MOON_1_0 and MOON_1_1, when 1.1 is define 
	compile also mono runtime, it is disabled by default since mono runtime
	give us some crashes right now.

2007-06-10  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: config.h added.

	* config.h: Added.

	* plugin-class.cpp,
	* moon-plugin.cpp,
	* plugin-class.h,
	* plugin-glue.cpp,
	* moon-plugin.h: Include config.h and remove unneeded includes.

2007-06-10  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Remove DEMO mode and set SCRIPTING mode by default.

2007-06-10  Miguel de Icaza  <miguel@novell.com>

	* moonlight.cs: the startup code, will contain the helper classes
	to create new AppDomains for each instance create.

	* mono.cpp: New file, embeds the Mono VM.

2007-06-10  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Call plugin instance destructor, now it dont causes
	error when you reload page.

	* moon-plugin.cpp: Only destroy container widget, if you dont destroy it
	when you start with page plugin, go to another page and close browser,
	a segfault is emited before browser exits. Now navigating for some time in
	silverlight pages looks to dont emit segfault if scripting is disabled.

	* plugin-class.cpp: Remove debug message from class constructor.

2007-06-09  Everaldo Canuto  <ecanuto@novell.com>

	[Xaml support]

	* moon-plugin.cpp: 
	- Read xaml file from src tag and display contents.
	- Disable demo box, now we have a better demo under xaml file.

2007-06-09  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: test added to subdirs.

2007-06-09  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp,
	* plugin-glue.cpp,
	* moon-plugin.h: Rename DEBUG to DEBUGMSG.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h,
	* moon-plugin.cpp: Change demo code to class method CreateDemoControls.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Add canvas, connect it to surface and get demo working
	back.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h,
	* moon-plugin.cpp: Rename CreateControls to CreateWindow.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Add $(MOON_LIBS) to linker options.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Dont delete plugin object since right now it causes some
	segfault when change to another page.

	* moon-plugin.cpp: Got scripting mode enabled by default.

2007-06-08  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Fix plugin destruction.
	* moon-plugin.cpp: Change button to gtk label with plugin name and version.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Set instance data to NULL to prevent error when browser
	closes.

	* moon-plugin.cpp: 
	- Disabled demo mode.
	- Enabled Scripting mode.
	- Fix runtime object creation, dont user NPN_RetainObject anymore.
	- Fix also object properties creation (settings).
	- Release object on class destructor.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Simplify controls creation and add a button when you are
	not in demo mode. It is just for now to made some tests.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Remove runtime initialization because it is wrong place.
	* plugin-glue.cpp: Add gtk and runtime initialization to NPP_Initialize.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Add some initialization code to prevent some segmentation
	fault.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Add SCRIPTING and DEMO macros to make available only
	tested features, it mean that developers must uncomment this MACRO lines
	before work on scripting and libmoon stuff.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Fix gtkplug creation fro 64bit systems. 

	* Makefile.am: Add -lavformat to link options.

	Thanks Grendel for this patches.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h: Change version number 0.99.0, SilverLight scripts searchs 
	for version > 0.95.1.

	* test/index.html: Small fixes in test page.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* test/index.html: Add javascript settings test.

	* moon-plugin.cpp,
	* moon-plugin.h: Implementing Settings class.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp,
	* moon-plugin.h: Implement runtime properties structure and 'version'
	property.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	[PluginClass added to handle script objects]

	* plugin-class.cpp,
	* plugin-class.h,
	* Makefile.am: PluginClass added.

	* moon-plugin.cpp, 
	* moon-plugin.h: PluginInstance now inherit from PluginClass, also 
	scriptclass was removed and "this" is used in NPN_CreateObject. For
	NPN_CreateObject we can now always use classes inherited by PluginClass.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Remove idl related code, new object system dont need idl or
	xpi files. 
	* nsIScriptableMoonPlugin.h: deleted.
	* nsIScriptableMoonPlugin.idl: deleted.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp: Fix the instance initialization problems, the object 
	instance was empty after creation.

2007-06-07  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp, 
	* moon-plugin.h,
	* plugin-glue.cpp: Fix SetValue declaration.

	* plugin-entry.cpp: Fix a lot of declarations, support for win and mac,
	support for runtime version checking and some other minor fixes.

2007-06-06  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Comment container destructor to prevent segfault.

2007-06-06  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Fix API change for Canvas.

2007-06-06  Sebastien Pouliot  <sebastien@ximian.com> 

	* moon-plugin.cpp: Fix API change for SolidColorBrush.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h: Add PLUGIN_OURNAME and PLUGIN_OURVERSION constants to 
	specify our internal name and version that differs from plugin version 
	detected by browser. SilverLight javascripts checks for WPF plugin and
	0.8.5.0 version.

	* moon-plugin.cpp: Change runtime initialization to CreateControls, before
	show demo.

	* plugin-glue.cpp: Fix memory allocation problems in NPP_New.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* plugin-glue.cpp,
	* moon-plugin.cpp,
	* moon-plugin.h: Add initialization and remove demo transformation.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	[Remove ScriptablePeer code]

	* nsScriptablePeer.h, nsScriptablePeer.cpp: Removed.

	* plugin-glue.cpp: Fix debugger messages.

	* Makefile.am, 
	* moon-plugin.cpp,
	* moon-plugin.h: Remove ScriptablePeer code since now Mozilla use
	another aproach.

2007-06-05  Sebastien Pouliot  <sebastien@ximian.com> 

	* moon-plugin.cpp: Fix API change for Rectangle.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin-glue.cpp: Splited in plugin-glue.cpp and plugin-entry.cpp.
	* plugin-glue.cpp: Fix 'undefined symbol' creating NPP_SetValueX.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Add some linker flags, it prevents crash on Epiphany.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* test/index.html: Add script to demo html page.

2007-06-05  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.cpp: Add runtime init to demo code.

2007-06-04  Everaldo Canuto  <ecanuto@novell.com>

	* plugin/Makefile.am: Generate and install .xpt for install-plugin target.

2007-06-04  Everaldo Canuto  <ecanuto@novell.com>

	[Implement scriptable to plugin]

	* plugin/test/index.html: Sample jscript included.

	* plugin/Makefile.am: Generates .h from idl file use xpidl.

	* plugin/moon-plugin.h,
	* plugin/moon-plugin.cpp,
	* plugin/moon-plugin-glue.cpp: Implement scriptable and some clean up.

	* plugin/nsIScriptableMoonPlugin.h,
	* plugin/nsIScriptableMoonPlugin.idl,
	* plugin/nsScriptablePeer.cpp,
	* plugin/nsScriptablePeer.h: New scriptable classes.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin-glue.cpp,
	* moon-plugin.h,
	* moon-plugin.cpp: Fix GetValue and implement SetValue.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h: Change plugin name, version and description to mimic 
	SilverLight and can be recognize as a valid plugin.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.c: Destroy objects on class destructor to prevent browser
	crashes.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	[Clean up demo and make some class fields private ]

	* moon-plugin-glue.c,
	* moon-plugin.h,
	* moon-plugin.c: Now just a surface control is added to plugn container,
	some field is now private demo was refactored.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Compile if needed for install-plugin target.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	[Move to c++ based classes ]
	
	* moon-plugin-glue.c: Fix getvalue to return error when no instance 
	available.

	* moon-plugin.h,
	* moon-plugin.c: Change all function to class methods, also move wrapper
	functions to moon-plugin-glue.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h,
	* moon-plugin.c,
	* moon-plugin-glue.c: Remove moon_plugin_initialize and moon_plugin_shutdown
	since whe alread have NP_Initialize and NP_Shutdown. Also change 
	PluginInstance structure to class (complete class suppont comming soon).

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin-glue.c: Some comments and stetic changes.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.h: Mime type description chage to 'WPFe Plug-In' to handle 
	SilverLight objects.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin.c:
	* moon-plugin.h: Remove unused members to provide a clean code.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* Makefile.am: Fix link options.

2007-06-03  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin-glue.c:
	* moon-plugin.c:
	* moon-plugin.h: Rename initialise to initialize.

	* Makefile.am: Add libmoon to link and install it on plugin dir.

2007-06-02  Everaldo Canuto  <ecanuto@novell.com>

	* moon-plugin-glue.c: Renamed to moon-plugin-glue.cpp.
	* moon-plugin.c: Renamed to moon-plugin.cpp.
	* Changelog: Create a separated change log for plugin.
	* Makefile.am: Renamed to moon-plugin.cpp.
	* moon-plugin.h: Renamed to moon-plugin.cpp.
	
	[Also add a sample to show libmoon features in browser]
