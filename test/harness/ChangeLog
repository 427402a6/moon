2008-12-03  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs, test-runner/TestRun.cs: Add support for printing
	  unit tests summary to stdout.

2008-12-02  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ExternalProcess.cs, test-runner/Test.cs: Detect if xsp
	  started successfully or not, and if xsp failed to start due to port
	  being in use, try another port.

2008-11-28  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: Newest advances in testing technology require
	  xsp2.

2008-11-28  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs: Simplify included/excluded logic.

2008-11-19  Sebastien Pouliot  <sebastien@ximian.com>

	* agviewer/agviewer.cpp: Don't mix one byte bool with four bytes
	gboolean
	r: jackson

2008-11-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs: Add support for MOON_DRT_EXCLUDE_FIXTURE(S).

2008-11-03  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* shocker/input.cpp: Fix typo.

2008-10-29  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* shocker/input.cpp: SendKeyInput: add error checking before faking a
	  key event.

2008-10-29  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* shocker/image-capture.cpp, shocker/image-capture.h: Make screenshots
	  a whole lot faster, more predictable and less memory-consuming by
	  doing XGetImage ourselves. For some reason using ImageMagick
	  without Xephyr causes a lot of memory to be used (between 100 and
	  200 *MB* per screenshot), effectively making animation tests very
	  nasty, and gdk inserts a XSync after blitting the screen, causing
	  performance to vary wildly. Also include time tracking when taking
	  multiple screenshots, so that we compensate for the time spent
	  taking a screenshot when deciding when the next screenshot should
	  be taken.

2008-10-27  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs: Added support for MOON_DRT_EXCLUDE_CATEGORIES:
	  excluding categories for test runs.
	* test-runner/Test.cs: Added support for MOON_DRT_EXCLUDE_CATEGORIES:
	  excluding categories for test runs. Call Dispose on our
	  ExternalProcesses.
	* test-runner/ExternalProcess.cs: Make ExternalProcess IDisposable, and
	  make Dispose call process.Dispose to properly dispose of our
	  disposable resources.

2008-10-23  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ExternalProcess.cs: Dispose our processes when we're done
	  with them.

2008-10-17  Chris Toshok  <toshok@ximian.com>

	* shocker/input.cpp: send a NumlockPress when we initialize the
	InputProvider -- not a sure fire way to get this to work, but test
	82 requires numlock to be on.

2008-10-10  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: Use local file path when executing xsp. Fixes
	  tests which has both location and xspExecDir set.

2008-10-08  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: RunLocationServerIfNeeded: add /:. as xsp
	  application, allows tests to access files in other directories
	  (test/js/js/*.js specifically).

2008-10-07  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ConsoleReport.cs: Revert summary changes to avoid
	  double-printing failures.

2008-10-07  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ComparisonReport.cs: Quick fix for datetime format
	  changes.

2008-10-07  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/TestRun.cs: Add a Tests property getter and in
	  RecordResult actually set the result on the test.
	* test-runner/Test.cs: Add Result accessors and prevent NRE in
	  Location.
	* test-runner/ConsoleReport.cs: Changed summary somewhat, printing
	  result for every test at the end.

2008-10-07  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ComparisonReport.cs: Work around an exception.
	* test-runner/Driver.cs: Show some rudimentary timing.

2008-10-07  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/XmlReport.cs: Use a date/time formats which sort
	  correctly.

2008-10-06  Jackson Harper  <jackson@ximian.com>

	* test-runner/Test.cs: Use a new port for the location server, the
	test might not have been finalized by the time the next test
	starts.

2008-10-06  Jackson Harper  <jackson@ximian.com>

	* test-runner/HtmlTest.cs: We try to patch "remote" files if they
	aren't actually remote, they are just using the location
	attribute.

2008-10-06  Jackson Harper  <jackson@ximian.com>

	* test-runner/Test.cs: Obey the location attribute so we can run
	'remote' tests.
	* test-runner/EdgeCompare.cs: Use the local path for saving the
	diff file.

2008-09-22  Larry Ewing  <lewing@novell.com>

	* agviewer/agviewer.cpp: make the viewer stay on top.

2008-08-13  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* masters/test-fillruleMaster.png: Added test-fillrule.xaml.

2008-07-30  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Updated.

2008-07-10  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* agviewer/agviewer.cpp: Add support for doing 'pkill -QUIT agviewer'
	  to dump stack trace to console while running.

2008-07-09  Andrew Jorgensen  <ajorgensen@novell.com>

	* test-runner/Makefile.am: Dist the regression report template

2008-07-08  Jackson Harper  <jackson@ximian.com>

	* test-runner/TestRun.cs: Return the number of tests that failed.
	* test-runner/Makefile.am: Add the regression report template
	* test-runner/ComparisonReport.cs: Create a text file if there are
	regressions listing each regression.

2008-06-24  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* agviewer/agviewer.cpp: Log a message when starting a test, and when
	  aborting if we're hanged, print a stack trace.

2008-06-24  Jackson Harper  <jackson@ximian.com>

	* harness/ComparisonReport.cs:
	* harness/comparison_report.html: Quick hack so people can copy
	the IDs of the tests.
	
2008-06-24  Jackson Harper  <jackson@ximian.com>

	* test-runner/XmlReport.cs: Don't save so much stuff.

2008-06-23  Jackson Harper  <jackson@ximian.com>

	* shocker/plugin.cpp:
	* shocker/image-capture.cpp|h:
	* test-runner/HtmlTest.cs:  Add support for offsetting the screencapture.
	
2008-06-21  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* masters/test-asf-demuxer-shuffled-payloadsMaster.png: Added.

2008-06-16  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* shocker/logging.cpp: Added an option to have the test plugin write
	  logging output directly to stdout instead of going through
	  dbus/logging server.

2008-06-16  Andrew Jorgensen  <ajorgensen@novell.com>

	* test-runner/HtmlReport.cs: Use index.html rather than index.htm

2008-06-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/DbusServices.cs, test-runner/LoggingServer.cs: Don't fail
	  a test run if logging-server.exe is running.

2008-06-10  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Updated.

2008-05-29  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: When starting up xsp wait a second before
	  continuing with the test.

2008-05-28  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* agviewer/agviewer.cpp: Add hang/infinite loop detection.

2008-05-27  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs, test-runner/HtmlReport.cs,
	  test-runner/ConsoleReport.cs, test-runner/TestResult.cs,
	  test-runner/TestRun.cs: Added TestResult.UnexpectedPass.

2008-05-27  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs: I lack the knowledge to do this at
	  configure/build time, so lets do it during execution.

2008-05-27  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/XmlReport.cs, test-runner/Test.cs,
	  test-runner/ImageCompare.cs, test-runner/HtmlReport.cs,
	  test-runner/EdgeCompare.cs: Dispose of Graphics/Image/Bitmaps when
	  we're done with them.

2008-05-27  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* agviewer/agviewer.cpp: Set the current directory to the directory
	  where each test resides, and only use the -working-dir argument for
	  remote tests. This is necessary since tests may reside in any
	  directory now that we support nested drtlists.

2008-05-26  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Updated.

2008-05-24  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs: Added support for remote and nested drtlists.

2008-05-24  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: Don't load dimensions until we need them. Cuts
	  the time spent running 1 test to a third (from 15 seconds to 5
	  seconds on my machine).

2008-05-24  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* agviewer/agviewer.cpp: Install a signal handler to print stack traces
	  when we crash.

2008-05-23  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Updated to give better tooltips.

2008-05-23  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/LoggingServer.cs, test-runner/ExternalProcess.cs,
	  test-runner/Driver.cs, test-runner/TestRun.cs,
	  test-runner/TestRunner.cs: Add support for running agviewer with
	  gdb, printing test output from the plugin to stdout as we go (so
	  that it comes in sync with the rest of the debug output), and make
	  SWALLOW_STREAMS configurable with an env-var.
	* test-runner/Test.cs, test-runner/HtmlTest.cs: Add support for remote
	  tests.
	* test-runner/ConsoleReport.cs: Don't print colors when we're running
	  gdb, it confuses gdb badly.

2008-05-23  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ConsoleReport.cs: Print the id of the tests in addition
	  to the name.

2008-05-22  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Updated.

2008-05-22  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/TestRunner.cs: Remove unneeded line.

2008-05-20  Jackson Harper  <jackson@ximian.com>

	* shocker/input.cpp: We don't need to open our own display anymore
	since this method is called in the main thread.

2008-05-19  Jackson Harper  <jackson@ximian.com>

	* shocker/image-capture.cpp: Workaround for TIFFs not being saved
	properly.

2008-05-16  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Test.cs: StopXspIfNeeded: Don't take down the entire
	  process if we can't kill XSP.

2008-05-16  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* harness.mdp: Added.

2008-05-16  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Driver.cs, test-runner/TestRunner.cs: Added -valgrind
	  option to run agviewer with valgrind.

2008-05-15  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/ConsoleReport.cs: Add colors to the console output.

2008-05-13  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* masters/test-second-surface-errorMaster.png: Added
	  test-second-surface-error.html.

2008-05-05  Jackson Harper  <jackson@ximian.com>

	* test-runner/TestRun.cs:
	* test-runner/TestRunner.cs: Move the test setup into the test
	runner so that tests will still be setup when running in a
	separate server process.

2008-05-05  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Use _call instead of the timeout call so
	we can work on older versions of dbus-glib.

2008-05-02  Andrew Jorgensen  <ajorgensen@novell.com>

	* agviewer/Makefile.am: Missing some headers from dist

2008-05-01  Jeffrey Stedfast  <fejj@novell.com>

	* test-runner/HtmlTest.cs: We always want an initial
	delay. Default to 500. Otherwise the screenshot happens before the
	result is rendered (happens for a bunch of the current tests).

2008-04-30  Jackson Harper  <jackson@ximian.com>

	* test-runner/Driver.cs: Sometimes you want to start a run midway
	through.  I added MOON_DRT_FIXTURE_START so you can specify which
	test the run should start on.

2008-04-30  Jackson Harper  <jackson@ximian.com>

	* test-runner/ConsoleReport.cs: Now that processing is async we
	can't report test and result separately.

2008-04-29  Jackson Harper  <jackson@ximian.com>

	* test-runner/EdgeCompare.cs:
	* test-runner/ImageCompare.cs: Dispose bitmaps.

	* test-runner/Test.cs: Add the completed reason as a property.
	* test-runner/TestRunner.cs: Set the completed reason property
	when tests are completed.
	* test-runner/TestRun.cs: Test processing is now done in a
	separate thread, this allows the tests to run while image compares
	are done in the background.  When a test that does animation or
	input or something else that takes a lot of time the processing
	thread can catch up, so there isn't much lag at the end of a test
	run and tests load much faster.

2008-04-29  Jackson Harper  <jackson@ximian.com>

	* shocker/image-capture.cpp: Use gdk for capturing single
	screenshots, this is done in the main thread, so it's safe, a
	little better performing, and frees us of image magicks memory
	management.
	
2008-04-29  Jeffrey Stedfast  <fejj@novell.com>

	* agviewer/agviewer.cpp (new_gtk_browser): Remove unused variable.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* test-runner/EdgeCompare.cs: We don't need this blurred images
	anymore.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Clean up test_path strings.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Still need to run a main loop when a test
	isn't supplied.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Allow non absolute paths to be used for
	user supplied test paths.

	* test-runner/TestRunner.cs:
	* test-runner/Driver.cs: Add a new mode that allows the test
	runner to run as a separate service which a user can connect to
	with their own agviewer process.  This makes debugging agviewer
	much easier.

2008-04-28  Jeffrey Stedfast  <fejj@novell.com>

	* agviewer/agviewer.cpp (main): Gotta loop thru all the args.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Fix running in standalone mode.

2008-04-28  Jackson Harper  <jackson@ximian.com>

	* shocker/input.cpp: When we are shutdown make sure down keys are
	sent an up, otherwise the keyboard ends in a weird state.
	* shocker/shocker.cpp|h: Cleanup the providers when shutdown is
	signalled, not the image capture provider though, since that might
	still be working.
	
2008-04-25  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Don't use escape for quitting a test
	anymore.  Use CTRL-C, also add CTRL-N to move to the next test.

2008-04-25  Jackson Harper  <jackson@ximian.com>

	* test-runner/Driver.cs: Make sure ignored tests get added to the
	report.  We need to add them separately now, because the list of
	tests passed to the runner are only tests that will be run.
	* test-runner/TestRun.cs: Modernize!

2008-04-25  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Don't start or stop the main loop if
	there are no tests to run.

2008-04-25  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/HtmlTest.cs, test-runner/html_template.html: Spaces->tabs
	  and indent correctly.

2008-04-25  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Fix the error message.

2008-04-25  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/Makefile.am: Fix logging-server.exe.

2008-04-25  Jackson Harper  <jackson@ximian.com>

	* test-runner/ExternalProcess.cs: For now don't capture
	stdout/stderr, should make debugging a little easier.

2008-04-24  Jackson Harper  <jackson@ximian.com>

	- A single agviewer process is now used, when it completes a test,
	it get's the next test from the test-runner.  If the agviewer
	process crashes the test runner will start a new one.
	- Instead of shutting down after each test we send a message to
	the agviewer via dbus, which cleans up and sends the testcompleted
	message up to the runner.
	
2008-04-22  Larry Ewing  <lewing@novell.com>

	* agviewer/agviewer.cpp: fix typo in include.

2008-04-22  Larry Ewing  <lewing@novell.com>

	* agviewer/agviewer.cpp (new_gtk_browser): changes to work against
	newer gtkmozembed versions.

	* shocker/image-capture.cpp (acquire_screenshot): add a probably
	pointless argument to capture in the hope of speeding it up a
	little.

	* shocker/input.cpp: add a disabled alternate version of MoveMouse
	that lets MouseInput pass.

2008-04-21  Jeffrey Stedfast  <fejj@novell.com>

	* test-runner/HtmlTest.cs: Updated to change
	http://localhost/test/jtr.js to jtr.js. Updated to reflect changes
	made to the test input files.

2008-04-17  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* masters/test-yuv-converterMaster.png: Added yuv converter test,
	  currently fails with our own yuv converter, succeeds with ffmpeg's.

2008-04-17  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* masters/test-canvas-no-sizeMaster.png: Added (currently failing) test
	  with a MediaElement within a Canvas which doesn't have width/height
	  set.

2008-04-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/XamlTest.cs: Use a relative path for the path to the xaml file
	  in the html file.
	* test-runner/html_template.html: Make sure we call Connect on the test
	  plugin before using it.

2008-04-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/LoggingServer.cs: Create a StandaloneServer class that does
	  all the standalone logging.

2008-04-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* test-runner/HtmlTest.cs: Use relative path for the snapshots. Makes it
	  possible to use the generated html file for creating baselines on SL.
	* test-runner/html_template.html: Some fixes to be compatible with IE/MS'
	  test plugin: pass document.name to SignalShutdown and create the
	  testplugin using a object tag on IE.

2008-04-11  Rolf Bjarne Kvinge <RKvinge@novell.com> 

	* shocker/shutdown-manager.cpp: Add a MOONLIGHT_SHOCKER_DONT_DIE flag which,
	  if is set to anything, will prevent the plugin from shutting down the
	  browser.

2008-04-09  Andrew Jorgensen  <ajorgensen@novell.com>

	* test-runner/Makefile.am: dist comparison_report.html

2008-04-09  Rolf Bjarne Kvinge  <RKVinge@novell.com>

	* test-runner/LoggingServer.cs: Fix the standalone logging server.

2008-04-08  Jackson Harper  <jackson@ximian.com>

	* test-runner/ComparisonReport.cs: Fix compare that i changed for
	debug.

2008-04-08  Jackson Harper  <jackson@ximian.com>

	* test-runner/ComparisonReport.cs: Add the current test to the
	list of completed tests.

2008-04-08  Jackson Harper  <jackson@ximian.com>

	* test-runner/*: Add the new comparison report stuff.

2008-04-03  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Add a new signal that is passed to the
	test harness to notify that the test exited safely.
	* test-runner/LoggingServer.cs:
	* test-runner/Driver.cs:  Ensure that the test was shut down
	cleanly.

2008-04-01  Jackson Harper  <jackson@ximian.com>

	* test-runner/ExternalProcess.cs: Fix error message.
	- Don't try to get the error code if the process times out.

2008-04-01  Jackson Harper  <jackson@ximian.com>

	* test-runner/*: Add a new xml report system.

2008-03-31  Jackson Harper  <jackson@ximian.com>

	* test-runner/EdgeCompare.cs: Add a key so people can tell what
	they are looking at.

2008-03-31  Andrew Jorgensen  <ajorgensen@novell.com>

	* shocker/logging.cpp: include time.h (for older systems)

2008-03-31  Jackson Harper  <jackson@ximian.com>

	* test-runner/HtmlReport.cs: Tidy up the borders on mosaic images.
	
2008-03-31  Jackson Harper  <jackson@ximian.com>

	* test-runner/ImageCompare.cs: Report the differences in layer
	count.

2008-03-28  Jackson Harper  <jackson@ximian.com>

	* shocker/shutdown-manager.cpp|h: Don't run in a separate thread
	anymore, just use a g_timeout for waiting.
	* image-capture.cpp: Update shutdown_manager function names.

2008-03-28  Jackson Harper  <jackson@ximian.com>

	* agviewer/agviewer.cpp: Fix var naming.
	- cleanup properly.
	
2008-03-27  Jackson Harper  <jackson@ximian.com>

	* test-runner/LoggingServer.cs: Fix test result from int.  1 is a
	pass.

2008-03-27  Jackson Harper  <jackson@ximian.com>

	* test-runner/Test.cs:
	* test-runner/HtmlTest.cs: Ignore tests where the input file can
	not be found.

2008-03-25  Jackson Harper  <jackson@ximian.com>

	* test-runner/Test.cs: Include the silver package when compiling
	codebehind files.
	* test-runner/ExternalProcess.cs: If we are waiting for the
	process set the exit code immediately after it exits.

2008-03-24  Jackson Harper  <jackson@ximian.com>

	* test-runner/HtmlTest.cs:
	* test-runner/html_template.html: Add supported for expected
	errors.  You can now specify an expected error in the drtlist that
	will be caught by the OnError handler and will have it's error
	type verified.  These will only work with .xaml tests that use the
	html template.

2008-03-20  Jackson Harper  <jackson@ximian.com>

	* shocker/browser.cpp|h: Add Release and Retain functions.
	* shocker/plugin.cpp: Properly retain and release the scriptable
	plugin.

2008-03-20  Jackson Harper  <jackson@ximian.com>

	* test-runner/HtmlTest.cs: Make sure that the substitutions get
	made if there are more than one on a line.
	- Adding pieces of the expected error stuff since it's all tangled
	with the above code.

2008-03-19  Jackson Harper  <jackson@ximian.com>

	* test-runner/ExternalProcess:  Add exit codes
	* test-runner/HtmlTest.cs: Make sure we call the base Setup and
	Teardown methods.
	* test-runner/ImageCompare.cs: Make ignore message a little more
	useful.
	* test-runner/Test.cs: Add support for a single code behind file
	so we can run 2.0 tests.
